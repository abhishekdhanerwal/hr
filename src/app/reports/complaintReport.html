<!-- start: BREADCRUMB -->
<div class="breadcrumb-wrapper" ng-click="vm.breadcrumbRoute()">
  <h4 class="mainTitle no-margin">Complaint Report</h4>

  <div ncy-breadcrumb class="pull-right"></div>
</div>
<!-- end: BREADCRUMB -->

<div class="container-fluid container-fullw" style="min-height:550px;">
  <div class="row" ng-show="vm.errorMessage">
    <div class="col-md-12">
      <div class="alert alert-danger">
        <button class="close" ng-click="vm.hideAlertBox()">
          &times;
        </button>
        <strong>Error!</strong> {{vm.errorMessage}}
      </div>
    </div>
  </div>
  <div class="row" ng-show="vm.message">
    <div class="col-md-12">
      <div class="alert alert-success">
        <button class="close" ng-click="vm.hideAlertBox()">
          &times;
        </button>
        {{vm.message}}
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <div class="panel panel-white">
        <div class="panel-body">
          <!--<div class="col-lg-12 col-md-12">-->
          <!--<div class="panel panel-white">-->
          <!--<div class="panel-body">-->
          <ng-form name="vm.Form" role="Form" id="Form" class="form-inline" novalidate>
            <div class="row">
              <div class="col-md-4 col-lg-4">
                <div class="form-group">
                  <label class="control-label">
                    Status : <span class="symbol required"></span>
                  </label><br>
                  <div ng-class="{'has-error':vm.Form.status.$dirty && vm.Form.status.$invalid, 'has-success':vm.Form.status.$valid}">
                    <select class="form-control" style="width:250px;" name="status" ng-model="vm.complaint.status" ng-options="complaint for complaint in vm.status" required>
                      <option value="all">All</option>
                    </select>
                    <span class="error text-small block"
                          ng-if="vm.Form.status.$dirty && vm.Form.status.$error.required">Status is required.</span>
                  </div>
                </div>
              </div>
              <div class="col-md-4 col-lg-4">
                <div class="form-group">
                  <label class="control-label">
                    Date Range :<span class="symbol required"></span>
                  </label>
                  <div class="input-group range-picker">
                    <div class="start-date" ng-class="{'has-error':vm.Form.start.$dirty && vm.Form.start.$invalid, 'has-success':vm.Form.start.$valid}">
                      <!--<input type="text" name="start" class="form-control" style="width:117px;"-->
                             <!--uib-datepicker-popup="yyyy/MM/dd"-->
                             <!--datepicker-options="vm.startDateOption" ng-model="vm.start" is-open="vm.startOpened"-->
                             <!--ng-init="vm.startOpened = false;" ng-required="true" close-text="Close"-->
                             <!--ng-click="vm.startOpen($event)" min-date="'1970-12-31'" max-date="vm.end" readonly />-->
                      <input type="text" name="start" show-button-bar="false" style="width:117px;" class="form-control" uib-datepicker-popup="{{formats}}" ng-model="vm.start" show-weeks="false" is-open="startopened" ng-init="startopened = false" ng-click="startopened = !startopened" min-date="minDate" max-date="maxDate" datepicker-options="dateOptions" ng-required="true">

                      <span class="error text-small block"
                            ng-if="vm.Form.start.$dirty && vm.Form.start.$error.required">Start Date is required.</span>
                    </div>
                    <span class="input-group-addon">to</span>
                    <div class="end-date"
                         ng-class="{'has-error':vm.Form.end.$dirty && vm.Form.end.$invalid, 'has-success':vm.Form.end.$valid}">
                      <!--<input type="text" name="end" class="form-control" style="width:117px;"-->
                             <!--uib-datepicker-popup="yyyy/MM/dd"-->
                             <!--datepicker-options="vm.endDateOption" ng-model="vm.end" is-open="vm.endOpened"-->
                             <!--ng-init="vm.endOpened = false;" ng-required="true" close-text="Close"-->
                             <!--ng-click="vm.endOpen($event)" min-date="vm.start" max-date="vm.maxDate" readonly />-->
                      <input type="text" name="end" show-button-bar="false" style="width:117px;" class="form-control" uib-datepicker-popup="{{format}}" ng-model="vm.end" show-weeks="false" is-open="endopened" ng-init="endopened = false" ng-click="endopened = !endopened  ; vm.endDateValidation()" min-date="vm.endMinDate" max-date="maxDate" datepicker-options="dateOptions" ng-required="true">
                      <span class="error text-small block"
                            ng-if="vm.Form.end.$dirty && vm.Form.end.$error.required">End Date is required.</span>
                    </div>
                  </div>
                </div>

                <!--<div class="form-group"-->
                     <!--ng-class="{'has-error':vm.Form.startDate.$dirty && vm.Form.startDate.$invalid, 'has-success':vm.Form.startDate.$valid}">-->
                  <!--<label>-->
                    <!--Start Date<span class="symbol required"></span>-->
                  <!--</label>-->
                  <!--<input type="text" name="startDate" placeholder="Start Date" class="form-control" uib-datepicker-popup="{{formats}}" ng-model="vm.notice.startDate" show-weeks="false" is-open="startopened" ng-init="startopened = false" ng-click="startopened = !startopened" min-date="minDate" max-date="maxDate" datepicker-options="dateOptions" ng-required="true" close-text="Close" />-->
                <!--</div>-->

                <!--<div class="form-group"-->
                     <!--ng-class="{'has-error':vm.Form.endDate.$dirty && vm.Form.endDate.$invalid, 'has-success':vm.Form.endDate.$valid}">-->
                  <!--<label>-->
                    <!--End Date<span class="symbol required"></span>-->
                  <!--</label>-->
                  <!--<input type="text" name="endDate" placeholder="End Date" class="form-control" uib-datepicker-popup="{{format}}" ng-model="vm.notice.endDate" show-weeks="false" is-open="endopened" ng-init="endopened = false" ng-click="endopened = !endopened  ; vm.endDateValidation()" min-date="vm.endMinDate" max-date="maxDate" datepicker-options="dateOptions" ng-required="true" close-text="Close" />-->
                <!--</div>-->
              </div>
              <div class="col-md-4 col-lg-4">
                <button type="button" class="btn btn-primary" style="margin-top:18px; width:150px;" ng-click="vm.generate()">
                  Generate Report
                </button>
              </div>
            </div>
            <!--<button type="button" ng-show="vm.download" class="btn btn-primary" style="margin-top:18px; width:150px;" ng-click="vm.csv()">Download</button>-->
            <br>
          </ng-form>
          <!--</div>-->
          <!--</div>-->
          <!--</div>-->
        </div>
      </div>
    </div>
  </div>

  <!--<wave-spinner ng-show="vm.reportProgress" ></wave-spinner>-->

  <div class="row" ng-show="vm.IsHidden">
    <div class="col-md-12">
      <div class="panel panel-white">
        <div class="panel-body">
          <!--<div class="col-lg-12 col-md-12">-->
          <!--<div class="panel panel-white">-->
          <!--<div class="panel-body">-->
          <table ng-table="vm.tableParams" show-filter="true" class="table table-striped table-bordered">
            <tr ng-repeat="row in $data">

              <td data-title="'Created Date'" sortable="'createdOn'" filter="{ 'createdOn' : 'text' }">
                {{row.createdOn | date: 'dd/MM/yyyy hh:mm'}}</td>
              <td data-title="'Complaint Type'">{{row.complaintType}}</td>
              <td data-title="'Resident Name'">{{row.registerFor.user.name}}</td>
              <td data-title="'Assigned To'">{{row.assignedTo.name}}</td>
              <td data-title="'Description'">{{row.description}}</td>
              <td data-title="'Address'">{{row.registerFor.tower}}{{','}}{{row.registerFor.flatNo}}</td>
              <td data-title="'Resolved Date'">{{row.resolvedOn | date: 'dd/MM/yyyy hh:mm'}}</td>

            </tr>
          </table>
          <!--</div>-->
          <!--</div>-->
          <!--</div>-->
        </div>
      </div>
    </div>
  </div>
</div>

