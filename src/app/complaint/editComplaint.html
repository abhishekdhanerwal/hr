<!-- start: BREADCRUMB -->
<div class="breadcrumb-wrapper">
  <h4 class="mainTitle no-margin">Edit Complaint</h4>

  <div ng-click="vm.breadcrumbRoute()" ncy-breadcrumb class="pull-right"></div>
</div>
<!-- end: BREADCRUMB -->

<wave-spinner ng-show="vm.progress" ></wave-spinner>

<div class="container-fluid container-fullw" ng-show="!vm.progress">
  <div class="row" ng-show="vm.errorMessage">
    <div class="col-md-12">
      <div class="alert alert-danger">
        <button class="close" ng-click="vm.hideAlertBox()">
          &times;
        </button>
        <strong>Error!</strong> {{vm.errorMessage}}
      </div>
    </div>
  </div>
  <div class="row" ng-show="vm.message">
    <div class="col-md-12">
      <div class="alert alert-success">
        <button class="close" ng-click="vm.hideAlertBox()">
          &times;
        </button>
        {{vm.message}}
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <div class="panel panel-white">
        <div class="panel-body">

          <fieldset>
            <legend>
              Edit Complaint
            </legend>
            <ng-form name="vm.Form" role="Form" id="Form" novalidate>

              <div class="row">
                <div class="col-md-6">

                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group"
                           ng-class="{'has-error':vm.Form.tower.$dirty && vm.Form.tower.$invalid, 'has-success':vm.Form.tower.$valid}" ng-if="!vm.isConsumerRole">
                        <label class="control-label"> Tower <span class="symbol required"></span> </label>
                        <select ng-disabled="true" class="form-control" name="tower" ng-model="vm.complaint.registerFor.tower"
                                ng-options="tower for tower in vm.towerList" required>
                        </select>
                        <span class="error text-small block"
                              ng-if="vm.Form.tower.$dirty && vm.Form.tower.$error.required">Tower is required.</span>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group" ng-class="{'has-error':vm.Form.flat.$dirty && vm.Form.flat.$invalid, 'has-success':vm.Form.flat.$valid}" ng-if="!vm.isConsumerRole">
                        <label class="control-label">
                          Flat <span class="symbol required"></span>
                        </label>
                        <div class="row">
                          <div class="col-md-7">
                            <input ng-disabled="true" type="text" style="width:190px;" name="flat" ng-model="vm.complaint.registerFor.flatNo" placeholder="Search Flat No"
                                   ng-value="vm.complaint.registerFor.flatNo"
                                   uib-typeahead="item for item in vm.flatList($viewValue)"
                                   typeahead-loading="loadingLocations" typeahead-min-length="3" typeahead-no-results="noResults"
                                   typeahead-editable='true'
                                   class="form-control" required>
                          </div>
                          <div class="col-md-5">
                        <span class="btn btn-danger" style="margin-left: 45px;" ng-click="vm.clearFlat()" ><i
                          class="fa fa-times"></i> </span>
                          </div>
                        </div>
                        <div ng-show="noResults" class="error">
                          <i class="glyphicon glyphicon-remove"></i> No Results Found
                        </div>
                        <span class="error text-small block"
                              ng-if="vm.Form.flat.$dirty && vm.Form.flat.$error.required">Flat is required.</span>
                      </div>
                    </div>
                  </div>

                    <!--<div class="form-group"-->
                         <!--ng-class="{'has-error':vm.Form.floor.$dirty && vm.Form.floor.$invalid, 'has-success':vm.Form.floor.$valid}" ng-if="!vm.isConsumerRole">-->
                      <!--<label class="control-label"> Floor </label>-->
                      <!--<input ng-disabled="true" type="text" placeholder="Enter Floor" class="form-control" name="floor" ng-model="vm.complaint.address.floor">-->
                    <!--</div>-->


                  <!--<div class="form-group" ng-if="!vm.isConsumerRole"-->
                       <!--ng-class="{'has-error':vm.Form.flat.$dirty && vm.Form.flat.$invalid, 'has-success':vm.Form.flat.$valid}" ng-if="!vm.isConsumerRole">-->
                    <!--<label class="control-label"> Flat <span class="symbol required"></span> </label>-->
                    <!--<select ng-disabled="true" class="form-control" name="flat" ng-model="vm.complaint.registerFor"-->
                            <!--ng-options="complaint as complaint.tower + ',' + complaint.flatNo for complaint in vm.flat" required>-->
                    <!--</select>-->
                    <!--<span class="error text-small block"-->
                          <!--ng-if="vm.Form.flat.$dirty && vm.Form.flat.$error.required">Flat is required.</span>-->
                  <!--</div>-->

                  <div class="form-group"
                       ng-class="{'has-error':vm.Form.complaintType.$dirty && vm.Form.complaintType.$invalid, 'has-success':vm.Form.complaintType.$valid}">
                    <label class="control-label"> Complaint Type <span class="symbol required"></span> </label>
                    <select ng-disabled="true" class="form-control" name="complaintType" ng-model="vm.complaint.complaintType" ng-change="vm.populateAssignToList(vm.complaint.complaintType)"
                            ng-options="complaint for complaint in vm.complaintType" required>
                    </select>
                    <span class="error text-small block"
                          ng-if="vm.Form.complaintType.$dirty && vm.Form.complaintType.$error.required">Complaint Type is required.</span>
                  </div>

                  <div class="form-group"
                       ng-class="{'has-error':vm.Form.complaintText.$dirty && vm.Form.complaintText.$invalid, 'has-success':vm.Form.complaintText.$valid}">
                    <label class="control-label">Description</label>
                    <textarea class="form-control custom-control" rows="3" name="complaintText" style="resize:none" ng-model="vm.complaint.description"></textarea>
                  </div>

                  <div class="form-group" ng-if="!vm.isConsumerRole"
                       ng-class="{'has-error':vm.Form.assignedTo.$dirty && vm.Form.assignedTo.$invalid, 'has-success':vm.Form.assignedTo.$valid}">
                    <label class="control-label"> Assign To <span class="symbol required"></span> </label>
                    <select class="form-control" name="assignedTo" ng-model="vm.complaint.assignedTo"
                            ng-options="complaint.name for complaint in vm.assignTo" ng-change="vm.changeStatus()" required>
                    </select>
                    <span class="error text-small block"
                          ng-if="vm.Form.assignedTo.$dirty && vm.Form.assignedTo.$error.required">Assign To field is required.</span>
                  </div>

                  <div class="form-group"
                       ng-class="{'has-error':vm.Form.status.$dirty && vm.Form.status.$invalid, 'has-success':vm.Form.status.$valid}">
                    <label class="control-label"> Status <span class="symbol required"></span> </label>
                    <select class="form-control" name="status" ng-model="vm.complaint.status"
                            ng-options="complaint for complaint in vm.statusList" required>
                    </select>
                    <span class="error text-small block"
                          ng-if="vm.Form.status.$dirty && vm.Form.status.$error.required">Status is required.</span>
                  </div>

                  <!--<div class="form-group">-->
                    <!--<label class="control-label">-->
                      <!--Address-->
                    <!--</label>-->
                    <!--<div class="row">-->
                      <!--<div class="col-md-6">-->
                        <!--<input type="text" ng-model="vm.complaint.address" placeholder="Search Address"-->
                               <!--ng-value="vm.complaint.address"-->
                               <!--uib-typeahead="item for item in vm.flatList"-->
                               <!--typeahead-loading="loadingLocations" typeahead-min-length="1" typeahead-no-results="noResults"-->
                               <!--typeahead-editable='true'-->
                               <!--class="form-control" required>-->
                      <!--</div>-->
                      <!--<div class="col-md-6">-->
                    <!--<span class="btn btn-danger" ng-click="vm.clearFlat()" ><i-->
                      <!--class="fa fa-times"></i> </span>-->
                      <!--</div>-->
                    <!--</div>-->
                    <!--&lt;!&ndash;<div ng-show="noResults" class="error">&ndash;&gt;-->
                    <!--&lt;!&ndash;<i class="glyphicon glyphicon-remove"></i> No Results Found&ndash;&gt;-->
                    <!--&lt;!&ndash;</div>&ndash;&gt;-->
                  <!--</div>-->

                </div>
              </div><br>

              <div class="row">
                <div class="col-md-12">
                  <div>
                    <button type="submit" class="btn btn-wide btn-success"
                            ng-click="vm.submit();vm.toTheTop()">
                      Save
                    </button>
                    <button type="reset" class="btn btn-wide btn-warning"
                            ng-click="vm.reset()">
                      Reset
                    </button>
                    <button type="cancel" ui-sref="app.complaint" class="btn btn-wide btn-danger">
                      Cancel
                    </button>
                  </div>
                </div>
              </div>


            </ng-form>
          </fieldset>
        </div>
      </div>
    </div>
  </div>



