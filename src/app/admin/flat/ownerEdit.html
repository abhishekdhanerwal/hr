<!-- start: BREADCRUMB -->
<div class="breadcrumb-wrapper" ng-click="vm.breadcrumbRoute()">
  <h4 class="mainTitle no-margin">Edit Flat</h4>

  <div ncy-breadcrumb class="pull-right"></div>
</div>
<!-- end: BREADCRUMB -->

<wave-spinner ng-show="vm.progress" ></wave-spinner>

<div ng-show="!vm.progress" class="container-fluid container-fullw">
  <div class="row" ng-show="vm.errorMessage">
    <div class="col-md-12">
      <div class="alert alert-danger">
        <button class="close" ng-click="vm.hideAlertBox()">
          &times;
        </button>
        <strong>Error!</strong> {{vm.errorMessage}}
      </div>
    </div>
  </div>
  <div class="row" ng-show="vm.message">
    <div class="col-md-12">
      <div class="alert alert-success">
        <button class="close" ng-click="vm.hideAlertBox()">
          &times;
        </button>
        {{vm.message}}
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <div class="panel panel-white">
        <div class="panel-body">

          <fieldset>
            <legend>
              Edit Flat
            </legend>

            <form name="vm.Form" role="Form" id="Form" novalidate>

                  <div class="col-lg-12 col-md-12">
                  <div class="panel panel-white">
                  <div class="panel-heading">
                  <h5 class="panel-title"><em>Owner Details</em></h5>
                  </div>
                  <div class="panel-body">
                    <div class="form-group" ng-hide="vm.hideOwnerCheckbox">
                    <div class="checkbox clip-check check-primary">
                    <input type="checkbox" id="hasOwner" value="isSold" ng-model="vm.flat.hasOwner" >
                    <label for="hasOwner">
                    Possession Complete
                    </label>
                    </div>
                    </div>
                    <br>

                  <div class="row" ng-if="vm.flat.hasOwner">
                    <div class="col-md-6">

                      <div class="form-group" ng-class="{'has-error':vm.Form.ownerName.$dirty && vm.Form.ownerName.$invalid, 'has-success':vm.Form.ownerName.$valid}">
                        <label class="control-label"> Name <span class="symbol required"></span> </label>
                        <input type="text" style="width:350px;" placeholder="Enter Name" class="form-control" name="ownerName" ng-model="vm.flat.ownerName" required/>
                        <span class="error text-small block" ng-if="vm.Form.ownerName.$dirty && vm.Form.ownerName.$error.required">Owner name is required</span>
                      </div>

                      <div class="form-group"
                           ng-class="{'has-error':vm.Form.ownerMobile.$dirty && vm.Form.ownerMobile.$invalid, 'has-success':vm.Form.ownerMobile.$valid}">
                        <label class="control-label"> Mobile <span class="symbol required"></span> </label>
                        <input type="text" style="width:350px;" placeholder="Enter Mobile Number" class="form-control" name="ownerMobile"
                               ng-model="vm.flat.ownerMobile" ng-disabled="vm.disableResidentDetails" ng-pattern="/^[1-9][0-9]*$/" ng-minlength=10
                               ng-maxlength=10 required/>
                        <span class="error text-small block"
                              ng-if="vm.Form.ownerMobile.$dirty && vm.Form.ownerMobile.$error.required">Mobile number is required</span>
                        <span class="error text-small block"
                              ng-if="vm.Form.ownerMobile.$error.maxlength == vm.Form.ownerMobile.$error.minlength && vm.Form.ownerMobile.$error.pattern">Invalid Characters</span>
                        <span class="error text-small block" ng-if="vm.Form.ownerMobile.$error.minlength">Mobile Number should be ten characters only</span>
                        <span class="error text-small block" ng-if="vm.Form.ownerMobile.$error.maxlength">Mobile Number should be ten characters only</span>
                      </div>
                    </div>

                    <div class="col-md-6">
                      <div class="form-group"
                           ng-class="{'has-error':vm.Form.ownerEmail.$dirty && vm.Form.ownerEmail.$invalid, 'has-success':vm.Form.ownerEmail.$valid}">
                        <label class="control-label"> Email <span class="symbol required"></span></label>
                        <input type="email" style="width:350px;" placeholder="Enter a valid e-mail" class="form-control" name="ownerEmail"
                               ng-model="vm.flat.ownerEmail" ng-pattern="/^[A-Za-z]+[A-Za-z0-9._]+@[A-Za-z]+\.[A-Za-z.]{2,5}$/" required>
                        <span class="error text-small block" ng-if="vm.Form.ownerEmail.$dirty && vm.Form.ownerEmail.$error.required">Email is required.</span>
                        <span class="error text-small block" ng-if="vm.Form.ownerEmail.$error.pattern">Please Enter a valid email address</span>
                      </div>

                      <div class="form-group" ng-class="{'has-error':vm.Form.dateOfPossession.$dirty && vm.Form.dateOfPossession.$invalid, 'has-success':vm.Form.dateOfPossession.$valid}">
                        <label class="control-label">  Date Of Possession <span class="symbol required"></span></label>
                        <input type="text" style="width:350px;" ng-readonly="true"  name="dateOfPossession" show-button-bar="false" ng-readonly="true" class="form-control" placeholder="Date of possession" uib-datepicker-popup="{{format}}" ng-model="vm.flat.dateOfPossession" show-weeks="false" is-open="inputopened" ng-init="inputopened = false" ng-click="inputopened = !inputopened" min-date="minDate" max-date="maxDate" datepicker-options="dateOptions" ng-required="true" close-text="Close" />
                      </div>
                    </div>
                  </div>
                  </div>
                  </div>
                  </div>

                  <div class="row">
                    <div class="col-md-12">
                      <div style="margin-left: 20px;">
                        <button type="submit" class="btn btn-wide btn-success"
                                ng-click="vm.submit();vm.toTheTop()">
                          Save
                        </button>
                        <button type="reset" class="btn btn-wide btn-warning"
                                ng-click="vm.reset()">
                          Reset
                        </button>
                        <button ng-if="vm.SocietyFlatData" type="cancel" class="btn btn-wide btn-danger"
                                ui-sref="app.flatsBySociety({id: vm.flat.society.id})">
                          Cancel
                        </button>
                        <button ng-if="vm.SocietyFlatData == false" type="cancel" class="btn btn-wide btn-danger"
                                ui-sref="app.flats">
                          Cancel
                        </button>
                      </div>
                    </div>
                  </div>

            </form>
          </fieldset>
        </div>
      </div>
    </div>
  </div>



